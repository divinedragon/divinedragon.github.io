<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
    










    







<script defer language="javascript" type="text/javascript" src="/js/bundle.min.145453261a7755f5042a854c4213501d215a8fbe34c08d181c40f803f1315e74.js"></script>





  



    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">

    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    
    <link rel="icon" href=/favicon.ico>

    
    





  





  
  
  


<!-- Open Graph image and Twitter Card metadata -->

<title itemprop="name">Deepak Shakya - Multi-Agent Chatbot - Part1</title>
<meta property="og:title" content=Deepak&#32;Shakya&#32;-&#32;Multi-Agent&#32;Chatbot&#32;-&#32;Part1 />
<meta name="twitter:title" content=Deepak&#32;Shakya&#32;-&#32;Multi-Agent&#32;Chatbot&#32;-&#32;Part1 />
<meta itemprop="name" content=Deepak&#32;Shakya&#32;-&#32;Multi-Agent&#32;Chatbot&#32;-&#32;Part1 />
<meta name="application-name" content=Deepak&#32;Shakya&#32;-&#32;Multi-Agent&#32;Chatbot&#32;-&#32;Part1 />
<meta property="og:site_name" content="Deepak Shakya" />


<meta name="description" content="" />
<meta itemprop="description" content="" />
<meta property="og:description" content="" />
<meta name="twitter:description" content="" />


<base href="/blog/2024/08/multi-agent-chatbot-part1/" />
<link rel="canonical" href="/blog/2024/08/multi-agent-chatbot-part1/" itemprop="url" />
<meta name="url" content="/blog/2024/08/multi-agent-chatbot-part1/" />
<meta name="twitter:url" content="/blog/2024/08/multi-agent-chatbot-part1/" />
<meta property="og:url" content="/blog/2024/08/multi-agent-chatbot-part1/" />


<meta property="og:updated_time" content="2024-08-04T00:00:00Z" />


<link rel="sitemap" type="application/xml" title="Sitemap" href='/sitemap.xml' />

<meta name="robots" content="index,follow" />
<meta name="googlebot" content="index,follow" />


<meta name="twitter:site" content="" />
<meta name="twitter:creator" content="" />
<meta property="fb:admins" content="" />


<meta name="apple-mobile-web-app-title" content="Deepak Shakya" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />






<meta name="generator" content="Hugo 0.133.1">


    
    

<link type="text/css" rel="stylesheet" href="/css/bundle.min.4077b00775ad8301c5ead11c2aaf3fc18c23563bfcb5c72abec8736b03e41967.css">


    
    <style>
    body {
        --sidebar-bg-color: #202020;
        --sidebar-img-border-color: #515151;
        --sidebar-p-color: #909090;
        --sidebar-h1-color: #FFF;
        --sidebar-a-color: #FFF;
        --sidebar-socials-color: #FFF;
        --text-color: #222;
        --bkg-color: #FAF9F6;
        --post-title-color: #303030;
        --list-color: #5a5a5a;
        --link-color: #268bd2;
        --date-color: #515151;
        --table-border-color: #E5E5E5;
        --table-stripe-color: #F9F9F9;
        --code-color: #000;
        --code-background-color: #E5E5E5;
        --code-block-color: #fff;
        --code-block-background-color: #272822;
        --moon-sun-color: #FFF;
        --moon-sun-background-color: #515151;
    }
    body.dark-theme {
        --text-color: #eee;
        --bkg-color: #121212;
        --post-title-color: #DBE2E9;
        --list-color: #9d9d9d;
        --link-color: #268bd2;
        --date-color: #9a9a9a;
        --table-border-color: #515151;
        --table-stripe-color: #202020;
        --code-color: #fff;
        --code-background-color: #515151;
        --code-block-color: #fff;
        --code-block-background-color: #272822;
    }
    body {
        background-color: var(--bkg-color);
    }
</style>

</head>

    <body class="dark-theme">
        <div class="wrapper">
            <aside class="sidebar">
    <div class="container sidebar-sticky">
        <div style="height:2rem"></div>
        <div class="sidebar-about">
    <h1 class="brand">
        
            <a href="/">
                <img src="/deepak-shakya.jpg" alt="brand image">
            </a>
        
        
            <a href="/">
                <h1>Deepak Shakya</h1>
            </a>
        
    </h1>
    <p class="lead">
    
    </p>
</div>

        <nav>
    <ul class="sidebar-nav">
        
        
        
        
            
                <li class="heading">
                  <a href="/">Home</a>
                </li>
            
        
        
            
                <li class="heading">
                  <a href="/blog/">Blog</a>
                </li>
            
        
    </ul>
</nav>

        <div class="sidebar-socials">

    <a target="_blank" class="social" title="GitHub" href="https://github.com/divinedragon">
        <svg xmlns="http://www.w3.org/2000/svg" width="1.2em" height="1.2em" viewBox="-2 -2 24 24">
            <path fill="currentColor" d="M18.88 1.099C18.147.366 17.265 0 16.233 0H3.746C2.714 0 1.832.366 1.099 1.099C.366 1.832 0 2.714 0 3.746v12.487c0 1.032.366 1.914 1.099 2.647c.733.733 1.615 1.099 2.647 1.099H6.66c.19 0 .333-.007.429-.02a.504.504 0 0 0 .286-.169c.095-.1.143-.245.143-.435l-.007-.885c-.004-.564-.006-1.01-.006-1.34l-.3.052c-.19.035-.43.05-.721.046a5.555 5.555 0 0 1-.904-.091a2.026 2.026 0 0 1-.872-.39a1.651 1.651 0 0 1-.572-.8l-.13-.3a3.25 3.25 0 0 0-.41-.663c-.186-.243-.375-.407-.566-.494l-.09-.065a.956.956 0 0 1-.17-.156a.723.723 0 0 1-.117-.182c-.026-.061-.004-.111.065-.15c.07-.04.195-.059.378-.059l.26.04c.173.034.388.138.643.311a2.1 2.1 0 0 1 .631.677c.2.355.44.626.722.813c.282.186.566.28.852.28c.286 0 .533-.022.742-.065a2.59 2.59 0 0 0 .585-.196c.078-.58.29-1.028.637-1.34a8.907 8.907 0 0 1-1.333-.234a5.314 5.314 0 0 1-1.223-.507a3.5 3.5 0 0 1-1.047-.872c-.277-.347-.505-.802-.683-1.365c-.177-.564-.266-1.215-.266-1.952c0-1.049.342-1.942 1.027-2.68c-.32-.788-.29-1.673.091-2.652c.252-.079.625-.02 1.119.175c.494.195.856.362 1.086.5c.23.14.414.257.553.352a9.233 9.233 0 0 1 2.497-.338c.859 0 1.691.113 2.498.338l.494-.312a6.997 6.997 0 0 1 1.197-.572c.46-.174.81-.221 1.054-.143c.39.98.424 1.864.103 2.653c.685.737 1.028 1.63 1.028 2.68c0 .737-.089 1.39-.267 1.957c-.177.568-.407 1.023-.689 1.366a3.65 3.65 0 0 1-1.053.865c-.42.234-.828.403-1.223.507a8.9 8.9 0 0 1-1.333.235c.45.39.676 1.005.676 1.846v3.11c0 .147.021.266.065.357a.36.36 0 0 0 .208.189c.096.034.18.056.254.064c.074.01.18.013.318.013h2.914c1.032 0 1.914-.366 2.647-1.099c.732-.732 1.099-1.615 1.099-2.647V3.746c0-1.032-.367-1.914-1.1-2.647z"/>
        </svg>
    </a>



    <a target="_blank" class="social" title="LinkedIn" href="https://www.linkedin.com/in/deepak-shakya/">
        <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1.2em" viewBox="0 0 448 512">
            <path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5c0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7c-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5c67.2 0 79.7 44.3 79.7 101.9V416z"/>
        </svg>
    </a>














    <a target="_blank" class="social" title="Email" href="mailto:justdpk@gmail.com">
       <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1.2em" viewBox="0 0 485.211 485.211">
            <path fill="currentColor" d="M301.393,241.631L464.866,424.56H20.332l163.474-182.928l58.801,51.443L301.393,241.631z M462.174,60.651H23.027 l219.579,192.142L462.174,60.651z M324.225,221.67l160.986,180.151V80.792L324.225,221.67z M0,80.792v321.029L160.972,221.64 L0,80.792z"/>
       </svg>
    </a>


    <a target="_blank" class="social" title="GitHub" href="https://stackoverflow.com/users/979772/divinedragon">
        <svg xmlns="http://www.w3.org/2000/svg" width="1.2em" height="1.2em" viewBox="0 0 169.61 200">
            <path d="M140.44 178.38v-48.65h21.61V200H0v-70.27h21.61v48.65z" fill="#bcbbbb"/><path d="M124.24 140.54l4.32-16.22-86.97-17.83-3.78 17.83zM49.7 82.16L130.72 120l7.56-16.22-81.02-37.83zm22.68-40l68.06 57.3 11.35-13.51-68.6-57.3-11.35 13.51zM116.14 0l-14.59 10.81 53.48 71.89 14.58-10.81zM37.81 162.16h86.43v-16.21H37.81z" fill="#f48024"/>
        </svg>
    </a>

</div>

        <p class="footnote">
powered by <a target="_blank" href="https://gohugo.io">Hugo</a> | themed with <a target="_blank" href="https://github.com/lukeorth/poison">poison</a>
    <br>
    &copy; 2024 Deepak Shakya. All rights reserved.
</p>

  </div>
</aside>

            <main class="content container">
                <div class="post">
  <div class="info">
  <h1 class="post-title">
    <a href="/blog/2024/08/multi-agent-chatbot-part1/">Multi-Agent Chatbot - Part1</a>
  </h1>

  <div class="headline">
    <div>
      
      <time datetime=" 2024-08-04T00:00:00Z" class="post-date">
        August 4, 2024
      </time>
      
      <span> - </span>
      <span class="reading-time">
        
          
        

        <span>3 mins read</span>
      </span>
    </div>

    
    <ul class="tags">
      
      <li class="tag-machine-learning">
        <a href="/tags/machine-learning">machine-learning</a>
      </li>
      
      <li class="tag-artificial-intelligence">
        <a href="/tags/artificial-intelligence">artificial-intelligence</a>
      </li>
      
      <li class="tag-system-design">
        <a href="/tags/system-design">system-design</a>
      </li>
      
      <li class="tag-chatbot">
        <a href="/tags/chatbot">chatbot</a>
      </li>
      
    </ul>
    
  </div>

  
  

  
</div>

  <p>With the explosion of Artificial Intelligence agents these days, we have a wide variety of intelligent agents which focus on solving a very focussed problem. However, to solve complex problems, we often need not one, but multiple agents. Often, this is the case in large organizations where different teams own different domains of the business processes, and their individual agents provide relevant expertise of their domain. Also, this reduces the burden on a single team to develop a large model/agent which solves all problems.</p>
<p>Here is my version on how I tried to setup such a Multi-Agent Chatbot. Below are all the articles in case you want to skip over to any specific topic.</p>
<ol>
<li><a href="/blog/2024/08/multi-agent-chatbot-part1">Multi-Agent Chatbot - Part1</a> - This article. Talks about general introduction and high level design</li>
<li><a href="/blog/2024/08/multi-agent-chatbot-part2">Multi-Agent Chatbot - Part2</a> - Discusses and code for the Agent Router component</li>
<li><a href="/blog/2024/08/multi-agent-chatbot-part3">Multi-Agent Chatbot - Part3</a> - Discusses and code for the Chatbot UI interface</li>
<li><a href="/blog/2024/08/multi-agent-chatbot-part4">Multi-Agent Chatbot - Part4</a> - Discusses and code for the Agents and integration with Agent Router</li>
<li><a href="/blog/2024/08/multi-agent-chatbot-part5">Multi-Agent Chatbot - Part5</a> - Making it all work and working demo</li>
</ol>
<h2 id="architecture">Architecture</h2>
<p>Below is a very high level architecture diagram for the different components in the system:</p>
<p><img src="/blog/2024/08/images/002-multi-agent-chatbot_1.png" alt="Multi-Agent Chatbot - Architecture"></p>
<ul>
<li>User interacts with the Chatbot using the Chatbot UI in the Browser</li>
<li>Chatbot UI interacts with Agent Router component via <a href="Websocket">Websocket</a> to allow a full duplex connection between the two.</li>
<li>Agent Router uses Agent Selection component to locate the Agent to which the user messages should be sent to.</li>
<li>Agent Router integrates with Agents via API calls so that depending on the Agent selection available, the incoming message from the User is forwarded to the selected agent.</li>
<li>Agent Router provides a <a href="Webhook">Webhook</a> to all integrated Agents to allow posting the response from the Agents asynchronously, which is then forwarded to the User via the previous connected Websocket.</li>
</ul>
<h3 id="notes-from-architecture">Notes from Architecture</h3>
<ul>
<li>This design is done to give an idea of how such a multi-agent system setup could look like.</li>
<li>It is not designed for scale. If you are looking for scalable version, tweak the design to make the components loosely coupled with each other. For instance, Agent Router doesn&rsquo;t need to integrate with Agents directly. It can publish events over a messaging queue (<a href="Kafka">Kafka</a>, <a href="ActiveMQ">ActiveMQ</a>, <a href="RabbitMQ">RabbitMQ</a>, <a href="AWSSQS">AWS SQS</a> etc.), and the agents could listen to messages via the Queue.</li>
<li>In the actual code, I plan to skip the agent selection part, and the integration of Agent Router with Agents via API calls. This are fairly straight forward implementations, and something which I personally don&rsquo;t really feel the need to implement.</li>
</ul>
<h2 id="technology-selections">Technology Selections</h2>
<p>As far as the technology goes, again since the idea is to keep things simple, here is what I plan to use for different components.</p>
<ul>
<li>
<p>Chatbot UI</p>
<ul>
<li>Plain Old <a href="HTML">HTML</a>, <a href="CSS">CSS</a>, <a href="JavaScript">JavaScript</a> - While <a href="React">React</a> or <a href="Vue">Vue</a> might a more appropriate choice, I purposefully avoided those to keep things simple</li>
<li><a href="Bootstrap">Bootstrap</a> - I like UI things to look good. Again, <a href="Bootstrap">Bootstrap</a> does the job and has all the components that you might ever need to build uis.</li>
</ul>
</li>
<li>
<p>Agent Router</p>
<ul>
<li><a href="Node.js">Node.js</a> - Again to avoid too much convolution with different Programming Languages, <a href="Node.js">Node.js</a> feels apt choice</li>
<li><a href="Express">Express</a> - Since, we need a WebServer to handle Websocket connections, we use Express</li>
<li><a href="Node.js-ws">Websocket, ws</a> - Websocket Library for <a href="Node.js">Node.js</a></li>
<li><a href="express-ws">express-ws</a> - Allows <a href="Express">Express</a> to handle <a href="Websocket">WebSockets</a> using <a href="Node.js-ws">ws</a></li>
<li><a href="uuid">uuid</a> - Generating of UUIDs</li>
<li><a href="Pino">pino and pino-pretty</a> - Pino Logger</li>
</ul>
</li>
<li>
<p>Agent</p>
<ul>
<li><a href="Node.js">Node.js</a> - Again to avoid too much convolution with different Programming Languages</li>
<li><a href="Express">Express</a> - Since, we need a WebServer to handle API calls from Chatbot, we use <a href="Express">Express</a></li>
<li><a href="axios">axios</a> - Make HTTP Webhook calls back to Chatbot components from Agent</li>
<li><a href="Pino">pino and pino-pretty</a> - Pino Logger</li>
</ul>
</li>
</ul>
<p>And that is it. This sets up the ground for us. In <a href="/blog/2024/08/multi-agent-chatbot-part2">Part 2</a>, we start to setup our Agent Router.</p>

  
  
<div class="footer">
    
	    
            <a class="previous-post" href="/blog/2024/08/ideal-use-of-machine-learning-and-artificial-intelligence/?ref=footer"><span style="font-weight:bold;">« Previous</span><br>Ideal use of Machine Learning and Artificial...</a>
        
	    
    
</div>

  
</div>
            </main>
            
  
    <div class="article-toc ">
    <div class="toc-wrapper">
      <h4 id="contents"></h4>
      <nav id="TableOfContents">
  <ul>
    <li><a href="#architecture">Architecture</a>
      <ul>
        <li><a href="#notes-from-architecture">Notes from Architecture</a></li>
      </ul>
    </li>
    <li><a href="#technology-selections">Technology Selections</a></li>
  </ul>
</nav>
    </div>
</div>

  

        </div>
        
        <script async defer src="https://scripts.simpleanalyticscdn.com/latest.js"></script>
        <noscript><img src="https://queue.simpleanalyticscdn.com/noscript.gif" alt="" referrerpolicy="no-referrer-when-downgrade" /></noscript>
    </body>
</html>
